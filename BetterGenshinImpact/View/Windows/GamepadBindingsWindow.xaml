<ui:FluentWindow x:Class="BetterGenshinImpact.View.Windows.GamepadBindingsWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 xmlns:windows="clr-namespace:BetterGenshinImpact.ViewModel.Windows"
                 Title="手柄按键映射配置"
                 Width="900"
                 Height="700"
                 d:DataContext="{d:DesignInstance Type=windows:GamepadBindingsViewModel}"
                 d:DesignHeight="700"
                 d:DesignWidth="900"
                 ExtendsContentIntoTitleBar="True"
                 WindowBackdropType="Mica"
                 WindowCornerPreference="Round"
                 WindowStartupLocation="CenterOwner"
                 mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        
        <ui:TitleBar Grid.Row="0"
                     Title="手柄按键映射配置"
                     Icon="pack://application:,,,/Assets/logo.ico" />

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="42,16,42,12">
                <ui:TextBlock Margin="0,0,0,16"
                              FontTypography="BodyStrong"
                              Text="配置游戏动作到手柄按钮的映射关系" />

                <!--  战斗动作  -->
                <ui:TextBlock Margin="0,0,0,8"
                              FontTypography="BodyStrong"
                              Text="战斗动作" />

                <ui:CardControl Margin="0,0,0,8">
                    <ui:CardControl.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Column="0"
                                          Text="普通攻击"
                                          VerticalAlignment="Center" />
                            <ComboBox Grid.Column="1"
                                      MinWidth="150"
                                      Margin="0,0,36,0"
                                      ItemsSource="{Binding AvailableButtons}"
                                      SelectedItem="{Binding NormalAttack, Mode=TwoWay}"
                                      DisplayMemberPath="DisplayName" />
                        </Grid>
                    </ui:CardControl.Header>
                </ui:CardControl>

                <ui:CardControl Margin="0,0,0,8">
                    <ui:CardControl.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Column="0"
                                          Text="元素战技"
                                          VerticalAlignment="Center" />
                            <ComboBox Grid.Column="1"
                                      MinWidth="150"
                                      Margin="0,0,36,0"
                                      ItemsSource="{Binding AvailableButtons}"
                                      SelectedItem="{Binding ElementalSkill, Mode=TwoWay}"
                                      DisplayMemberPath="DisplayName" />
                        </Grid>
                    </ui:CardControl.Header>
                </ui:CardControl>

                <ui:CardControl Margin="0,0,0,8">
                    <ui:CardControl.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Column="0"
                                          Text="元素爆发"
                                          VerticalAlignment="Center" />
                            <ComboBox Grid.Column="1"
                                      MinWidth="150"
                                      Margin="0,0,36,0"
                                      ItemsSource="{Binding AvailableButtons}"
                                      SelectedItem="{Binding ElementalBurst, Mode=TwoWay}"
                                      DisplayMemberPath="DisplayName" />
                        </Grid>
                    </ui:CardControl.Header>
                </ui:CardControl>

                <ui:CardControl Margin="0,0,0,8">
                    <ui:CardControl.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Column="0"
                                          Text="跳跃"
                                          VerticalAlignment="Center" />
                            <ComboBox Grid.Column="1"
                                      MinWidth="150"
                                      Margin="0,0,36,0"
                                      ItemsSource="{Binding AvailableButtons}"
                                      SelectedItem="{Binding Jump, Mode=TwoWay}"
                                      DisplayMemberPath="DisplayName" />
                        </Grid>
                    </ui:CardControl.Header>
                </ui:CardControl>

                <ui:CardControl Margin="0,0,0,8">
                    <ui:CardControl.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Column="0"
                                          Text="冲刺"
                                          VerticalAlignment="Center" />
                            <ComboBox Grid.Column="1"
                                      MinWidth="150"
                                      Margin="0,0,36,0"
                                      ItemsSource="{Binding AvailableButtons}"
                                      SelectedItem="{Binding Sprint, Mode=TwoWay}"
                                      DisplayMemberPath="DisplayName" />
                        </Grid>
                    </ui:CardControl.Header>
                </ui:CardControl>

                <ui:CardControl Margin="0,0,0,16">
                    <ui:CardControl.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Column="0"
                                          Text="拾取/交互"
                                          VerticalAlignment="Center" />
                            <ComboBox Grid.Column="1"
                                      MinWidth="150"
                                      Margin="0,0,36,0"
                                      ItemsSource="{Binding AvailableButtons}"
                                      SelectedItem="{Binding PickUpOrInteract, Mode=TwoWay}"
                                      DisplayMemberPath="DisplayName" />
                        </Grid>
                    </ui:CardControl.Header>
                </ui:CardControl>

                <!--  摇杆配置  -->
                <ui:TextBlock Margin="0,0,0,8"
                              FontTypography="BodyStrong"
                              Text="摇杆配置" />

                <ui:CardControl Margin="0,0,0,8">
                    <ui:CardControl.Header>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Row="0"
                                          Grid.Column="0"
                                          Text="使用左摇杆控制移动"
                                          VerticalAlignment="Center" />
                            <ui:TextBlock Grid.Row="1"
                                          Grid.Column="0"
                                          Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                          Text="启用后，左摇杆（LS）将用于角色移动"
                                          TextWrapping="Wrap" />
                            <ui:ToggleSwitch Grid.Row="0"
                                             Grid.RowSpan="2"
                                             Grid.Column="1"
                                             Margin="0,0,36,0"
                                             IsChecked="{Binding Config.GamepadBindingsConfig.UseLeftStickForMovement, Mode=TwoWay}" />
                        </Grid>
                    </ui:CardControl.Header>
                </ui:CardControl>

                <ui:CardControl Margin="0,0,0,16">
                    <ui:CardControl.Header>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Row="0"
                                          Grid.Column="0"
                                          Text="使用右摇杆控制镜头"
                                          VerticalAlignment="Center" />
                            <ui:TextBlock Grid.Row="1"
                                          Grid.Column="0"
                                          Foreground="{ui:ThemeResource TextFillColorTertiaryBrush}"
                                          Text="启用后，右摇杆（RS）将用于镜头控制"
                                          TextWrapping="Wrap" />
                            <ui:ToggleSwitch Grid.Row="0"
                                             Grid.RowSpan="2"
                                             Grid.Column="1"
                                             Margin="0,0,36,0"
                                             IsChecked="{Binding Config.GamepadBindingsConfig.UseRightStickForCamera, Mode=TwoWay}" />
                        </Grid>
                    </ui:CardControl.Header>
                </ui:CardControl>

                <!--  角色切换  -->
                <ui:TextBlock Margin="0,0,0,8"
                              FontTypography="BodyStrong"
                              Text="角色切换" />

                <ui:CardControl Margin="0,0,0,8">
                    <ui:CardControl.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Column="0"
                                          Text="切换角色 1"
                                          VerticalAlignment="Center" />
                            <ComboBox Grid.Column="1"
                                      MinWidth="150"
                                      Margin="0,0,36,0"
                                      ItemsSource="{Binding AvailableButtons}"
                                      SelectedItem="{Binding SwitchMember1, Mode=TwoWay}"
                                      DisplayMemberPath="DisplayName" />
                        </Grid>
                    </ui:CardControl.Header>
                </ui:CardControl>

                <ui:CardControl Margin="0,0,0,8">
                    <ui:CardControl.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Column="0"
                                          Text="切换角色 2"
                                          VerticalAlignment="Center" />
                            <ComboBox Grid.Column="1"
                                      MinWidth="150"
                                      Margin="0,0,36,0"
                                      ItemsSource="{Binding AvailableButtons}"
                                      SelectedItem="{Binding SwitchMember2, Mode=TwoWay}"
                                      DisplayMemberPath="DisplayName" />
                        </Grid>
                    </ui:CardControl.Header>
                </ui:CardControl>

                <ui:CardControl Margin="0,0,0,8">
                    <ui:CardControl.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Column="0"
                                          Text="切换角色 3"
                                          VerticalAlignment="Center" />
                            <ComboBox Grid.Column="1"
                                      MinWidth="150"
                                      Margin="0,0,36,0"
                                      ItemsSource="{Binding AvailableButtons}"
                                      SelectedItem="{Binding SwitchMember3, Mode=TwoWay}"
                                      DisplayMemberPath="DisplayName" />
                        </Grid>
                    </ui:CardControl.Header>
                </ui:CardControl>

                <ui:CardControl Margin="0,0,0,16">
                    <ui:CardControl.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Grid.Column="0"
                                          Text="切换角色 4"
                                          VerticalAlignment="Center" />
                            <ComboBox Grid.Column="1"
                                      MinWidth="150"
                                      Margin="0,0,36,0"
                                      ItemsSource="{Binding AvailableButtons}"
                                      SelectedItem="{Binding SwitchMember4, Mode=TwoWay}"
                                      DisplayMemberPath="DisplayName" />
                        </Grid>
                    </ui:CardControl.Header>
                </ui:CardControl>

                <!--  按钮  -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,36,16">
                    <ui:Button Content="恢复默认"
                               Margin="0,0,12,0"
                               Command="{Binding ResetToDefaultCommand}" />
                    <ui:Button Content="关闭"
                               Appearance="Primary"
                               Command="{Binding CloseWindowCommand}" />
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</ui:FluentWindow>
